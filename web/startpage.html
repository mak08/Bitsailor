<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <title>Welcome - BitSailor Router</title>
    <meta name="description" content="Web UI">
    <meta name="author" content="Michael Kappert">
    <link rel="stylesheet" href="css/startpage.css">
    <script src="js/colors.js"></script>
    <script type="module" src="js/startpage.js"></script>
    
  </head>
  <body>
    <div class="grid-container">

	  <div class="welcome">
		<h2>Welcome</h2>
		<br>
		<p>
		  This is the BitSailor router start page. If you don't have a user yet, please <a href="signup.html">register</a>.
		</p>
		<p>
		  Log in to the router page (see links in the table below) with your <b>boat name</b>.
		</p>
		<p>
		  The router, and this site, are currently still under development. Please have a look at the Known Issues before using the router.
		</p>

		<p><b>Please join us on <a href="https://discord.gg/JU5ZKk2XYe">Discord</a></b></p>

		<p><b>If you encounter strange errors</b>, please perform a <b>hard reload</b> (Ctrl-Shift-R on Chrome and Firefox, <a href="https://www.howtogeek.com/672607/how-to-hard-refresh-your-web-browser-to-bypass-your-cache/">see here</a> for other browsers).
		
	  </div>


	  <div class="news">
		<h4>News</h4>
		<ul>
		  <li><b>2022-06-12</b><br>
			Store current forecasts by resolution, date and cycle<br>
			Store archived forecasts by year, month and day.
		  </li>
		  <li><b>2022-05-26</b><br>
			Moved to a (mostly) stateless service model. No more session held in backend.
		  </li>
		  <li><b>2022-04-24</b><br>
			Inverted TWA convention: Starboard is now positive, port is negative
		  </li>
		  <li><b>2022-03-14</b> PI DAY!<br>
			Bugfix:	Normalize latlng on underflow too, this was causing wrong results near the antimeridian 
		  </li>
		  <li><b>2022-01-08</b><br>
			Provide <a href="/weather">GRIB files</a> for download
		  </li>
		  <li><b>2022-01-03</b><br>
			Automatically revert to previous cycle if requested forecast is not available<br>
			Increase step size to 1h after first 48 hours of route
		  </li>
		  <li><b>2021-12-10</b><br>
			Improved 'reached' check reliability and performance<br>
			Experimental GFS 0.25° support (Realsail version only)  
		  </li>
		  <li><b>2021-11-27</b><br>
			Realsail now uses the wind speed preserving interpolation <br>
		  </li>
		  <li><b>2021-11-20</b><br>
			Added VR support <br>
			Temporarily removed cycle selection as it may have caused server crashes
		  </li>
		  <li><b>2021-07-23</b><br>
			Fix 'reached' check<br>
			Exclude region above 89°54"N due to numerical instability of distance arithmetic
		  </li>
		  <li><b>2021-07-04</b><br>
			Display 'old' isochrones in red
		  </li>
		  <li><b>2021-07-04</b><br>
			Bugfix: Properly reset to automatic cycle determination when disabling manual cycle
		  </li>
		  <li><b>2021-06-06</b><br>
			Improved search algorithm
		  </li>
		  <li><b>2021-05-22</b><br>
			Added short (6 or 3hrs) routing using 2min steps
		  </li>
		  <li><b>2021-05-16</b><br>
			Moved to bitsailor.net
		  </li>
		</ul>
	  </div>

	  <div class="instructions"><h3>Instructions</h3></div>
	  <div class="instructions-content"  style="font-size:90%">
		<h4>Basic usage</h4>
	  	<ol>
		  <li>
			Drag&amp;drop the <img src="img/start_32x20.png">start and <img src="img/finish_32x20.png">finish flags or use the context menu to position them.
		  </li>
		  <li>
			Select the maximum duration.
		  </li>
		  <li>
			Tick the 'Start time' box to specify a start time, or leave it unchecked to use the current time.
		  </li>
		  <li>
			Press 'Execute'.<br>
			<p>
			  Routing may take several minutes. <em>Please avoid frequent long routings.</em><br>
			  Short routings (up to 4 days) only take a few seconds.
			</p>
		  </li>
		</ol>
		<h4>NMEA</h4>
		<ol>
		  <li>
			Enter your NMEA port in the input field and press 'Reconnect'.
		  </li>
		  <li>
			Press 'Update' to acquire your boat position from realsail.net.
			<p>
			  The start flag is moved to your boat position and the NMEA timestamp is entered as the start time.
			</p>
			<p>
			  It may take up to a minute until a position is available.<br>
			  If another client connects to the NMEA port, your connection may be terminated. 
			</p>
		  </li>
		</ol>
		<h4>TWA tool</h4>
		<ul>
		  <li>
			<p>
			  When routing is complete and the route is displayed, click on any waypoint to anchor the TWA tool on the waypoint.<br>
			  Click on the map to set a direction. The blue path represents a fixed heading.
			</p>
			<p style="font-size:80%">
			  Please note, during wind updates the TWA tool may attempt to use a forecast that is not yet available.
			  In this case, retry later or select the cycle manually using the 'Cycle' checkbox.
			</p>
		  </li>
		</ul>
		<h4>Waypoints and Isochrones</h4>
		<ul>
		  <li>
			Clicking on a waypoint or an isochrone sets the wind interpolation to the corresponding time.
		  </li>
		</ul>
		
	  </div>

	  <div class="issues"><h3>Troubleshooting / Known Issues</h3></div>
	  <div class="issues-content" style="font-size:90%;">
	  	<ul>

		  <li><b>Activation e-mail not received</b>
			<p>Some e-mail providers may classify the sender domain as spam. Please check your spam folder.</p>
			<p>Some providers seem to have technical difficulties accepting e-mail from bitsailor.net, notably <b>orange.fr</b>.</p>
			<p>If you are affected, please try a different e-mail address. For example, GMail is known to work and it is easy to register an e-mail address there.</p> 
		  </li>

		  <li><b>Isochrones run past destination</b>
			<p>The route search terminates when a route point is generated that is closer to the destination than a given target distance.
			  Sometimes, especially in routings longer than 2.5days and strong wind conditions, no such point is ever generated.</p>
			<p>Move the target point closer to an isochrone to workaround this issue.</p> 
		  </li>

		  <li><b>Route does not reach destination</b>
			<p>
			  This may happen when wind conditions are unfavourable and the boat's tacking angle is large, or when there are too many obstructions in the area.<br>
			  You can usually work around this by moving the target behind or sideways from your actual destination.<br>
			  Also see "Isochrones run past destination"
			</p>
		  </li>

		  <li><b>Routing fails with an error message similar to</b>
			<pre><code>error The value NIL is not of type VIRTUALHELM::POLARS</code></pre>
			<p>
			  The router stores some of your race-related settings when you load a race, among the the polars used for this race.
			  If the server crashed and restarted while, the settings are lost.
			</p>
			<p>
			  Reloading the page should get rid of this error. 
			</p>
		  </li>

		  <li><b>Routing fails with an error message</b> similar to
			<pre><code> error Missing forecast /root/Router/Wetter/20210529_gfs.t06z.pgrb2.1p00.f072.grib2 not found</code></pre>
			<p>
			  This is usually due to missing and/or delayed forecasts at NOAA.
			  The router first tries to fall back to the previous cycle and issues an error message if required forecast is missing in the previous cycle as well.
			</p>
			<p>
			  Retry later or select a shorter duration.
			</p>
		  </li>
		  <li><b>UI wind differs from wind displayed in waypoint info.</b>
			<p>The router delays the switch to the latest GFS cycle to match the update policy of the game.<br>
			  The UI alwys displays the selected cycle, or the latest cycle if none is selected.
		  </li>
		</ul>
	  </div>

	  <div class="disclaimer"><h3>Disclaimer</h3>
		<p style="font-size:80%;">
		  All content and services on this site are provided without warranty, implied or otherwise, of fitness for any particular purpose. Use entirely at your own risk.
		</p>	
		<p style="font-size:80%;">
		  You shall be liable for any damages, losses or expenses of a third party caused by attempts to misuse the functions provided by this site.
		</p>
	  </div>
	  
	  <div class="contact">
        <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
          <input type="hidden" name="cmd" value="_s-xclick" />
          <input type="hidden" name="hosted_button_id" value="DSTYB5K3BEQHJ" />
          <input type="image" width="72" height="24" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" title="Donate to BitSailor" alt="Donate with PayPal button" />
        </form>
		<address>
		  &copy; 2021 <a href="mailto:michael.kappert@gmx.net" style="background-color:grey;">Michael Kappert</a>
		</address>
	  </div>	
	  
      <div class="table-header-rs"><h3><a href="https://www.realsail.net">RealSail</a> races</h3></div>
	  <div class="table-rs">
		<table id="race_list_rs">
		  <thead>
			<tr>
			  <th>Race</th>
			  <th>Class</th>
			  <th>Record</th>
			  <th>GFS 0.25</th>
			  <th>Start</th>
			  <th>Router link</th>
			</tr>
		  </thead>
		  <tbody>
		  </tbody>
		</table>	
      </div>
	  
      <div class="table-header-vr"><h3><a href="https://virtualregatta.com">VirtualRegatta</a> races</h3></div>
	  <div class="table-vr">
		<table id="race_list_vr">
		  <thead>
			<tr>
			  <th>Race</th>
			  <th>Class</th>
			  <th>Record</th>
			  <th>Start</th>
			  <th>Router link</th>
			</tr>
		  </thead>
		  <tbody>
		  </tbody>
		</table>	
	  </div>

	</div>
  </body>
</html>
